(this["webpackJsonpimage-gallery-typescript"]=this["webpackJsonpimage-gallery-typescript"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(10),o=a.n(r),c=(a(15),a(16),a(8)),s=a(2),d=a(7),l=a(3),u=function e(t,a){var n=this;Object(l.a)(this,e),this.imageStore=void 0,this.selectedImageId=void 0,this.getAllImages=function(){return Object.keys(n.imageStore).reduce((function(e,t){var a=n.imageStore[t];return a&&(e=[].concat(Object(d.a)(e),[a])),e}),[])},this.getSelectedImageId=function(){return n.selectedImageId},this.editCaption=function(e,t){var a=n.imageStore[e];return a?(a=Object(s.a)(Object(s.a)({},a),{},{caption:t}),n.imageStore[e]=a,[!0,a]):[!1,null]},this.editSelectedImageId=function(e){n.selectedImageId=e},this.imageStore=t.reduce((function(e,t){return Object(s.a)(Object(s.a)({},e),{},Object(c.a)({},t.id,Object(s.a)({},t)))}),{}),this.selectedImageId=a},g=a(4),f=a(6),m=a(5),p=(a(17),a(0)),h=function(e){Object(f.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).captionRef=void 0,n.truncateCaption=function(){n.captionRef.current&&function(e,t,a,n){e.style.overflow="auto";var i=Number(window.getComputedStyle(e).lineHeight.slice(0,-2))*a;n&&(e.style.width=n);var r=t.split("");if(e.clientHeight<=i)e.style.overflow="hidden";else{for(var o=0,c=r.length/2,s=function(){var t=Math.floor(o+(c-o)/2),a=r.filter((function(e,a){return a<t})),n=r.filter((function(e,a){return a>=r.length-t})),s=e.innerText;e.innerText=a.join("")+"..."+n.join(""),e.clientHeight<=i?o=t+1:(e.innerText=s,c=t-1)};o<=c;)s();e.style.overflow="hidden"}}(n.captionRef.current,n.props.image.caption,2,"100%")},n.handleDragStart=function(e){var t=e.target;t.classList.toggle("sidebar-panel-dragging"),t.dataset.sidebarPanelDragging="true"},n.handleDragEnd=function(e){var t=e.target;t.classList.toggle("sidebar-panel-dragging"),t.dataset.sidebarPanelDragging="false"},n.captionRef=i.a.createRef(),n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.truncateCaption()}},{key:"componentDidUpdate",value:function(){this.truncateCaption()}},{key:"render",value:function(){var e=this,t=this.props.image,a=t.id,n=t.caption,i=t.src,r=this.props.isSelected;return Object(p.jsxs)("div",{className:"sidebar-panel ".concat(r?"sidebar-panel-selected":""),tabIndex:0,"data-sidebar-panel-id":a,onClick:function(){e.props.onSelectedImageIdChange(a)},draggable:"true",onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,children:[Object(p.jsx)("img",{className:"sidebar-panel_image",height:"40px",width:"40px",src:i,alt:n}),Object(p.jsx)("span",{ref:this.captionRef,className:"sidebar-panel_caption",children:n})]})}}]),a}(i.a.Component),b=function(e){Object(f.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).findClosestPanelBelow=function(e,t){return Array.from(t).reduce((function(t,a){var n=a.getClientRects()[0],i=n.top+n.height/2,r=e-i;return r<0&&r>t.offset?{closestPanelBelow:a,offset:r}:t}),{closestPanelBelow:null,offset:Number.NEGATIVE_INFINITY})},e.handleDragOver=function(t){var a=document.querySelector('[data-sidebar-panel-dragging="true"]');if(a){var n=document.querySelectorAll("[data-sidebar-panel-id]"),i=e.findClosestPanelBelow(t.clientY,n).closestPanelBelow;if(i&&i!==a){var r=a.dataset.sidebarPanelId,o=e.props.images.findIndex((function(e){return e.id===i.dataset.sidebarPanelId}));r&&e.props.onImageOrderChange(r,o)}}},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",(function(t){if("Enter"===t.key&&document.activeElement){var a=document.activeElement.getAttribute("data-sidebar-panel-id");a&&e.props.onSelectedImageIdChange(a)}}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.images,n=t.selectedImageId;return Object(p.jsx)("div",{onDragOver:function(t){!function(e){var t;return function(){for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];var r=this;t&&cancelAnimationFrame(t),t=requestAnimationFrame((function(){e.apply(r,[].concat(n)),t=void 0}))}}(e.handleDragOver)(t)},className:"sidebar",children:a&&a.map((function(t){return Object(p.jsx)(h,{image:t,onSelectedImageIdChange:e.props.onSelectedImageIdChange,isSelected:n===t.id},t.id)}))})}}]),a}(i.a.Component),v=(a(19),function(e){var t=e.image,a=e.onImageCaptionChange,n=t.id,i=t.src,r=t.caption;return Object(p.jsxs)("div",{className:"display-container",children:[Object(p.jsx)("img",{className:"display-container_image",height:"400px",width:"200px",src:i,alt:r}),Object(p.jsx)("textarea",{className:"display-container_caption",value:r,onChange:function(e){var t=e.target.value;a(n,t)}})]})}),I=(a(20),function(e){Object(f.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state=void 0,n.handleSelectedImageIdChange=function(e){n.setState({selectedImageId:e}),n.props.model.editSelectedImageId(e)},n.handleImageCaptionChange=function(e,t){n.setState((function(a){return{images:a.images.map((function(a){return a.id!==e?a:Object(s.a)(Object(s.a)({},a),{},{caption:t})}))}})),n.props.model.editCaption(e,t)},n.handleImageOrderChange=function(e,t){var a=n.state.images.find((function(t){return t.id===e}));if(a){n.setState((function(n){return{images:(i=n.images.filter((function(t){return t.id!==e})),[].concat(Object(d.a)(i.slice(0,t)),[a],Object(d.a)(i.slice(t))))};var i}))}},n.state={images:[],selectedImageId:""},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.model.getAllImages(),t=this.props.model.getSelectedImageId();this.setState({images:e,selectedImageId:t})}},{key:"render",value:function(){var e=this,t=this.state.images.find((function(t){return t.id===e.state.selectedImageId}));return Object(p.jsxs)("div",{className:"image-gallery",children:[this.state.images.length>0&&Object(p.jsx)(b,{images:this.state.images,selectedImageId:this.state.selectedImageId,onSelectedImageIdChange:this.handleSelectedImageIdChange,onImageOrderChange:this.handleImageOrderChange}),t&&Object(p.jsx)(v,{image:t,onImageCaptionChange:this.handleImageCaptionChange})]})}}]),a}(i.a.Component)),j=[{id:"1",caption:"Photo of a brown jelly fish in blue water. ",src:"https://images.unsplash.com/photo-1590013330451-3946e83e0392?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=3634&q=80"},{id:"2",caption:"Palm tree under a blue sky",src:"https://images.unsplash.com/photo-1529061333663-08226b29f6ba?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=934&q=80"},{id:"3",caption:"Snow covered pine trees during winter in Romania.",src:"https://images.unsplash.com/photo-1614497883639-e7e3fba976fd?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=3634&q=80"},{id:"4",caption:"Waterfall in Orlando",src:"https://images.unsplash.com/photo-1524338198850-8a2ff63aaceb?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=958&q=80"},{id:"5",caption:"A blue and brown kingfisher pictured in Ontario, Canada",src:"https://images.unsplash.com/photo-1601544829024-bc7f4c2213c5?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1306&q=80"}];var x=function(){var e=new u(j,"2");return Object(p.jsx)("div",{children:Object(p.jsx)(I,{model:e})})},O=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,22)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),i(e),r(e),o(e)}))};o.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(x,{})}),document.getElementById("root")),O()}],[[21,1,2]]]);
//# sourceMappingURL=main.e5a2b5b7.chunk.js.map